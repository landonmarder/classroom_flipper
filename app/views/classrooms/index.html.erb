<h1 class="aligncenter">Manage Your Classrooms</h1>

<% if current_user.is_teacher? %>
  <h4><%= link_to 'Create Classroom', new_classroom_path%></h4>
  <table class="aligncenter">
    <thead>
      <th>Class Name</th>
      <th>Description</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <% @classrooms.each do |classroom| %>
      <tr>
        <td><%=classroom.name%></td>
        <td><%=classroom.description%></td>
        <td><%= link_to 'More Info', '#'%> | <%= link_to 'Edit', edit_classroom_path(classroom) %> |
        <%= link_to 'Delete', classroom, method: :delete, data: { confirm: 'Are you sure you want to delete the classroom? This cannot be undone.' } %></td>
      </tr>
      <% end %>
    </tbody>
  </table>

<% else %>
  <h1>Enroll in a Classroom</h1>
  <%= search_form_for @search do |f| %>
    <div class="field">
      <%= f.label :name_cont, "Classroom Name" %>
      <%= f.text_field :name_cont %>
    </div>
    <div class="actions"><%= f.submit "Search"%></div>
  <% end %>

  <table class="aligncenter">
    <thead>
      <th>Class Name</th>
      <th>Description</th>
      <th>Teacher</th>
      <th>Enroll</th>
    </thead>
    <tbody>
        <% @classrooms.each do |classroom| %>
        <tr>
          <td><%=classroom.name%></td>
          <td><%=classroom.description%></td>
          <td><%=classroom.user.professional_name %></td>
          <td>
            <% if classroom.enrolled?(current_user) %>
            Enrolled
            <% else %>
            <%= button_to '+', enrollments_path(classroom_id: classroom.id) %>
            <% end %>
          </td>
        </tr>
        <% end %>
    </tbody>
  </table>

<% end %>
